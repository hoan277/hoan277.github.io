<!DOCTYPE html>
<html lang="vi">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Thư viện đa ngữ | Từ vựng chủ đề tiếng Nhật, tiếng Trung & một số giáo trình</title>
  <meta name="description"
    content="Khám phá Thư viện đa ngữ: Nguồn từ vựng tiếng Nhật (Minna no Nihongo), tiếng Trung (Hán ngữ 6 quyển) và từ vựng theo chủ đề phong phú, miễn phí. Nâng cao kỹ năng vốn từ vựng của bạn!">
  <meta name="keywords"
    content="Thư viện đa ngữ, từ vựng tiếng Nhật, Minna no Nihongo, từ vựng tiếng Trung, HSK6, học tiếng Nhật, học tiếng Trung, từ vựng theo chủ đề, tài liệu học ngôn ngữ, miễn phí">
  <meta name="author" content="Hoan277">

  <meta property="og:title" content="Thư viện đa ngữ | Từ Vựng Tiếng Nhật, Tiếng Trung & Chủ Đề">
  <meta property="og:description"
    content="Khám phá Thư viện đa ngữ: Nguồn từ vựng tiếng Nhật (Minna no Nihongo), tiếng Trung (Hán ngữ 6 quyển) và từ vựng theo chủ đề phong phú, miễn phí. Nâng cao kỹ năng vốn từ vựng của bạn!">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://hoan277.github.io">
  <meta property="og:image" content="https://hoan277.github.io/favico.png">
  <meta property="og:site_name" content="Thư viện đa ngữ">
  <meta property="og:locale" content="vi_VN">

  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Permissions-Policy" content="*">
  <!-- <meta http-equiv="Permissions-Policy" content="accelerometer=*, autoplay=*, camera=*, clipboard-read=*, clipboard-write=*, encrypted-media=*, fullscreen=*, geolocation=*, gyroscope=*, magnetometer=*, microphone=*, midi=*, payment=*, screen-wake-lock=*, usb=*, web-share=*"> -->
  <link rel="manifest" href="https://hoan277.github.io/manifest.json">
  <link rel="shortcut icon" href="https://hoan277.github.io/favico.png" type="image/x-icon">
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-0MYZWH41W3"></script>
  <script>window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments); } gtag('js', new Date()); gtag('config', 'G-0MYZWH41W3');</script>
</head>

<body style="margin: 0; padding: 0; height: 100vh; position: relative;">
  <!-- Loading overlay -->
  <!-- Iframe -->
  <iframe id="main-iframe"
    src="https://script.google.com/macros/s/AKfycbzHbfd-E6hvtEsYrPcvYYH4HQHGnTg099UUOsmGepZuoEwdIODBoigEkL-CdcW1fzTfTA/exec"
    frameborder="0" width="100%" height="100%"
    allow="accelerometer *; ambient-light-sensor *; autoplay *; camera *; clipboard-read *; clipboard-write *; encrypted-media *; fullscreen *; geolocation *; gyroscope *; magnetometer *; microphone *; midi *; payment *; picture-in-picture *; screen-wake-lock *; speaker *; sync-xhr *; usb *; web-share *; vibrate *; vr *">
  </iframe>
  <!-- CSS -->
  <style>
    * {
      border: 0;
      box-sizing: border-box;
      margin: 0;
      padding: 0
    }

    :root {
      --hue: 223;
      --sat: 10%: --gray100: hsl(var(--hue), var(--sat), 90%);
      --gray900: hsl(var(--hue), var(--sat), 10%);
      --bg: light-dark(var(--gray100), var(--gray900));
      --fg: light-dark(var(--gray900), var(--gray100));
      --dur: 8s;
      color-scheme: light dark;
      font-size: clamp(1.25rem, 1.0417rem + 1.0417vw, 1.875rem)
    }

    body {
      background: var(--bg);
      color: var(--fg);
      font: bold 1em/1.5 Comfortaa, sans-serif;
      display: grid;
      place-items: center;
      height: 100vh;
      letter-spacing: .1em;
      text-align: center;
      text-transform: uppercase
    }

    #loading_main {
      width: 100%;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center
    }

    .hexagon {
      margin-bottom: 1.5em;
      overflow: hidden;
      position: relative;
      width: 15em;
      height: 15em
    }

    .hexagon__group {
      position: absolute;
      width: 100%;
      height: 100%
    }

    .hexagon__group:nth-child(odd) {
      transform: rotate(30deg)
    }

    .hexagon__sector {
      animation-name: moveOut1;
      top: calc(50% - .1em);
      left: calc(50% - .1em)
    }

    .hexagon__sector,
    .hexagon__sector:after,
    .hexagon__sector:before {
      animation-duration: var(--dur);
      animation-iteration-count: infinite;
      animation-timing-function: linear;
      position: absolute;
      width: .2em;
      height: .2em
    }

    .hexagon__sector:after,
    .hexagon__sector:before {
      animation-name: ripple;
      background-color: currentColor;
      border-radius: .1em;
      content: "";
      display: block;
      top: 0;
      left: 0;
      transform-origin: 0.1em 0.1em
    }

    .hexagon__sector:before {
      transform: rotate(-30deg)
    }

    .hexagon__sector:after {
      transform: rotate(-150deg)
    }

    .hexagon__sector:nth-child(2) {
      animation-name: moveOut2
    }

    .hexagon__sector:nth-child(3) {
      animation-name: moveOut3
    }

    .hexagon__sector:nth-child(4) {
      animation-name: moveOut4
    }

    .hexagon__sector:nth-child(5) {
      animation-name: moveOut5
    }

    .hexagon__sector:nth-child(6) {
      animation-name: moveOut6
    }

    .hexagon__group:nth-child(2) .hexagon__sector,
    .hexagon__group:nth-child(2) .hexagon__sector:after,
    .hexagon__group:nth-child(2) .hexagon__sector:before {
      animation-delay: calc(var(--dur) * -1 / 6)
    }

    .hexagon__group:nth-child(3) .hexagon__sector,
    .hexagon__group:nth-child(3) .hexagon__sector:after,
    .hexagon__group:nth-child(3) .hexagon__sector:before {
      animation-delay: calc(var(--dur) * -2 / 6)
    }

    .hexagon__group:nth-child(4) .hexagon__sector,
    .hexagon__group:nth-child(4) .hexagon__sector:after,
    .hexagon__group:nth-child(4) .hexagon__sector:before {
      animation-delay: calc(var(--dur) * -3 / 6)
    }

    .hexagon__group:nth-child(5) .hexagon__sector,
    .hexagon__group:nth-child(5) .hexagon__sector:after,
    .hexagon__group:nth-child(5) .hexagon__sector:before {
      animation-delay: calc(var(--dur) * -4 / 6)
    }

    .hexagon__group:nth-child(6) .hexagon__sector,
    .hexagon__group:nth-child(6) .hexagon__sector:after,
    .hexagon__group:nth-child(6) .hexagon__sector:before {
      animation-delay: calc(var(--dur) * -5 / 6)
    }

    @keyframes moveOut1 {
      from {
        transform: rotate(0) translateY(0) scale(0)
      }

      3% {
        transform: rotate(0) translateY(.2em) scale(1)
      }

      97% {
        transform: rotate(0) translateY(7.3em) scale(1)
      }

      to {
        transform: rotate(0) translateY(7.5em) scale(0)
      }
    }

    @keyframes moveOut2 {
      from {
        transform: rotate(60deg) translateY(0) scale(0)
      }

      3% {
        transform: rotate(60deg) translateY(.2em) scale(1)
      }

      97% {
        transform: rotate(60deg) translateY(7.3em) scale(1)
      }

      to {
        transform: rotate(60deg) translateY(7.5em) scale(0)
      }
    }

    @keyframes moveOut3 {
      from {
        transform: rotate(120deg) translateY(0) scale(0)
      }

      3% {
        transform: rotate(120deg) translateY(.2em) scale(1)
      }

      97% {
        transform: rotate(120deg) translateY(7.3em) scale(1)
      }

      to {
        transform: rotate(120deg) translateY(7.5em) scale(0)
      }
    }

    @keyframes moveOut4 {
      from {
        transform: rotate(180deg) translateY(0) scale(0)
      }

      3% {
        transform: rotate(180deg) translateY(.2em) scale(1)
      }

      97% {
        transform: rotate(180deg) translateY(7.3em) scale(1)
      }

      to {
        transform: rotate(180deg) translateY(7.5em) scale(0)
      }
    }

    @keyframes moveOut5 {
      from {
        transform: rotate(240deg) translateY(0) scale(0)
      }

      3% {
        transform: rotate(240deg) translateY(.2em) scale(1)
      }

      97% {
        transform: rotate(240deg) translateY(7.3em) scale(1)
      }

      to {
        transform: rotate(240deg) translateY(7.5em) scale(0)
      }
    }

    @keyframes moveOut6 {
      from {
        transform: rotate(300deg) translateY(0) scale(0)
      }

      3% {
        transform: rotate(300deg) translateY(.2em) scale(1)
      }

      97% {
        transform: rotate(300deg) translateY(7.3em) scale(1)
      }

      to {
        transform: rotate(300deg) translateY(7.5em) scale(0)
      }
    }

    @keyframes ripple {

      from,
      to {
        width: .2em
      }

      33% {
        width: 2.4em
      }
    }
  </style>
  <!-- JS -->
  <script>
    var loadingMain = document.createElement('div');
    loadingMain.id = 'loading_main';
    var hexagon = document.createElement('div');
    hexagon.className = 'hexagon';
    for (var i = 0; i < 6; i++) {
      var group = document.createElement('div');
      group.className = 'hexagon__group';
      for (var j = 0; j < 6; j++) {
        group.innerHTML += '<div class="hexagon__sector"></div>';
      }
      hexagon.appendChild(group);
    }
    loadingMain.appendChild(hexagon);
    document.body.prepend(loadingMain);
    const iframe = document.getElementById("main-iframe");
    // check iframe load completed with readyState  
    iframe.onload = function () {
      loadingMain.style.display = "none";
    };

    if ("serviceWorker" in navigator) {
      navigator.serviceWorker
        .register("./sw.js")
        .then((reg) => console.log("Đăng ký SW thành công: ", reg))
        .catch((err) => console.error("Lỗi khi cố gắng đăng ký SW: ", err));
    } else {
      console.log("Không có serviceWorker");
    }
    if (window.matchMedia('(display-mode: standalone)').matches) {
      // Người dùng đã cài đặt ứng dụng
    } else {
      // Người dùng chưa cài đặt ứng dụng
      if ('serviceWorker' in navigator && 'PushManager' in window) {
        window.addEventListener('beforeinstallprompt', (e) => {
          e.preventDefault();
          const deferredPrompt = e;
          const installButton = document.createElement('button');
          installButton.textContent = 'Cài đặt Thư viện đa ngữ';
          installButton.style.cssText = 'position: fixed; bottom: 10px; left: 50%; transform: translateX(-50%);padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; background-image: linear-gradient(to right, #ff99cc, #ff66b3); color: white;';
          document.body.appendChild(installButton);
          installButton.addEventListener('click', () => {
            deferredPrompt.prompt();
            deferredPrompt.userChoice.then((choiceResult) => {
              if (choiceResult.outcome === 'accepted') {
                console.log('App installed');
              } else {
                console.log('App installation declined');
              }
              installButton.style.display = 'none';
            });
          });
        });
      }
    }

    function checkIframeUrl() {
      try {
        const iframeUrl = new URL(iframe.src);
        // Ưu tiên đọc query parameter
        const selectedSheet = iframeUrl.searchParams.get('selected_sheet') ||
          // Nếu không có query parameter, đọc hash
          (iframeUrl.hash.match(/sheet-([^#]+)/)?.[1]);
        if (selectedSheet) {
          console.log('Selected sheet từ iframe URL:', selectedSheet);
          // Lưu vào localStorage để hỗ trợ offline
          localStorage.setItem('selected_sheet', selectedSheet);
          const urlPath = `/sheet/${selectedSheet}`;
          window.history.pushState({ urlPath }, '', urlPath);
          console.log('Đã thay đổi URL thành:', urlPath);
          // Gửi sự kiện GA (nếu cần)
          gtag('event', 'page_view', { page_path: urlPath });
          console.log('Đã gửi sự kiện page_view đến GA:', urlPath);
        }
      } catch (error) {
        console.error('❌ Lỗi khi đọc URL iframe:', error);
      }
    }

    // Kiểm tra định kỳ
    setInterval(checkIframeUrl, 1000);

    // Theo dõi thay đổi src của iframe
    const observer = new MutationObserver(checkIframeUrl);
    observer.observe(iframe, { attributes: true, attributeFilter: ['src'] });
  </script>
</body>



</html>